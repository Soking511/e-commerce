<link rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

<div class="bg-gray w-full flex flex-col md:flex-row gap-5 px-3 md:px-4 text-[#161931]">
  <!-- Slim Sidebar with Slide-in animation on small screens -->
  <aside class="md:w-1/5 lg:w-1/6 py-4 transition-transform transform duration-500 ease-in-out translate-x-0 ">
    <div class="sticky flex flex-col gap-3 p-4 text-sm border-r border-indigo-100 top-12 rounded-lg ">
      <h2 class="pl-3 mb-4  font-semibold duration-300">Control Panel</h2>

      <!-- Loop through operations -->
      @for(Operation of Operations; track Operation) {
        <div class="flex flex-col">
          <a (click)="selected(Operation.name)"
            class="flex items-center justify-between rounded-lg px-3 py-2 font-semibold cursor-pointer transition-all hover:bg-indigo-200 hover:shadow-lg hover:scale-105">
            @if( Operation.route ){
              <h1 [routerLink]="Operation.route" class="text-gray-500 transition duration-300 hover:text-indigo-600 text-sm">{{Operation.name}}</h1>
            } @else {
              <h1 class="text-gray-500 transition duration-300 hover:text-indigo-600 text-sm">{{Operation.name}}</h1>
            }
            @if(Operation.parts) {
              @if(Operation.showSections == true && Operation.name == OperationSelected){
                <span class="material-symbols-outlined transform rotate-180 transition-transform duration-300">arrow_drop_down</span>
              } @else {
                <span class="material-symbols-outlined transform rotate-0 transition-transform duration-300">arrow_right</span>
              }
            }
          </a>

          <!-- Child elements with animated slide-in and fade-in effect -->
          @if(Operation.parts) {
          <div class="pl-6 overflow-hidden transition-all duration-300 ease-in-out"
            [ngClass]="{'max-h-0 opacity-0': !Operation.showSections, 'max-h-screen opacity-100': Operation.showSections}">
            @for(part of Operation.parts; track part) {
            <h1
              class="p-2 cursor-pointer text-sm transition-transform duration-300 hover:bg-gray-200 hover:text-indigo-700 rounded-lg transform hover:translate-x-2">{{part.name}}</h1>
            }
          </div>
          }
        </div>
      }
    </div>
  </aside>

  <!-- Main content area -->
  <main class="flex-grow min-h-screen py-4 flex flex-col items-start transition-opacity duration-1000 ease-in-out animate-fade-in">
    <div class="p-4 w-full"> <!-- Set the inner div to take full width -->
        <app-users *ngIf="OperationSelected === 'Users'"></app-users>
        <!-- <app-users *ngIf="OperationSelected === 'Users'"></app-users> -->
    </div>
  </main>
</div>

<!-- Keyframe animations -->
<style>
  @keyframes fadeIn {
    0% { opacity: 0; }
    100% { opacity: 1; }
  }

  .animate-fade-in {
    animation: fadeIn 1s ease-in-out;
  }

  /* Sidebar tweaks */
  aside {
    padding: 0.5rem 1rem;
  }

  a {
    padding: 0.5rem 0.75rem;
    font-size: 14px;
  }

  h2 {
    font-size: 1.25rem;
  }

  .hover\:bg-indigo-200:hover {
    background-color: #e0e7ff;
  }
</style>
